<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>High Blood Pressure & Your Kidneys: An Interactive Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f0f9ff; color: #1e293b; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        main section { animation: fadeIn 0.6s ease-in-out; }
        
        .test-btn {
            transition: all 0.3s ease;
            border: 2px solid #e2e8f0;
        }
        .test-btn.active {
            transform: translateY(-5px);
            border-color: #38bdf8;
            box-shadow: 0 10px 15px -3px rgba(56, 189, 248, 0.2), 0 4px 6px -4px rgba(56, 189, 248, 0.2);
        }

        #cycle-diagram-svg path { transition: fill 0.4s ease; }
        #cycle-text { transition: opacity 0.4s ease; }
    </style>
</head>
<body class="bg-sky-50">

    <header class="bg-white/90 backdrop-blur-lg sticky top-0 z-50 shadow-md">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <h1 class="text-xl md:text-2xl font-bold text-slate-800">
                <span class="text-blue-600">üíß</span> <span data-translate="header_title">Your Kidneys & Blood Pressure</span>
            </h1>
            <div class="flex items-center gap-4">
                <a href="https://www.niddk.nih.gov/health-information/kidney-disease/high-blood-pressure" target="_blank" rel="noopener noreferrer" class="hidden sm:block text-sm font-semibold text-blue-600 hover:text-blue-800 transition" data-translate="full_guide_link">
                    Full NIDDK Guide ‚Üí
                </a>
                <div class="relative">
                    <div class="text-right text-xs text-slate-500 mb-1">¬øNo entiende ingl√©s? Lo tenemos cubierto.</div>
                    <div class="flex items-center gap-2 bg-slate-100 border border-slate-200 rounded-lg p-1 pr-2 shadow-sm">
                        <span class="text-xl">üåê</span>
                        <select id="language-selector" class="bg-transparent border-none text-sm font-semibold text-slate-700 focus:ring-0 cursor-pointer">
                            <option value="en">English</option>
                            <option value="es">Espa√±ol</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main>
        <!-- What is the Connection? -->
        <section id="what-is-it" class="py-16 md:py-20">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-3xl md:text-4xl font-extrabold text-slate-800" data-translate="cycle_h2">The Vicious Cycle of High Blood Pressure and Kidney Disease</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-slate-600" data-translate="cycle_p">Your kidneys and blood pressure have a close relationship. High blood pressure can damage your kidneys, and damaged kidneys can make your blood pressure worse. Click the buttons to see how this cycle works.</p>
                </div>
                
                <div class="mt-12 bg-white p-6 md:p-8 rounded-2xl shadow-xl max-w-4xl mx-auto">
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <!-- Visual Diagram -->
                        <div class="relative w-full max-w-xs mx-auto">
                            <svg id="cycle-diagram-svg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                                <g id="bp-group">
                                    <path fill="#e2e8f0" d="M38.1,-53.9C51.5,-49.2,65.9,-43.3,73.5,-32.4C81.1,-21.5,81.9,-5.6,76.4,7.8C70.9,21.1,59.1,31.9,47.1,42.5C35.1,53.1,22.9,63.5,8.8,67.2C-5.3,70.9,-21.3,67.9,-34.5,60.1C-47.7,52.3,-58.1,39.7,-64.8,25.2C-71.5,10.7,-74.5,-5.6,-69.5,-19.6C-64.5,-33.6,-51.5,-45.3,-37.8,-50.7C-24.1,-56.1,-9.7,-55.2,3.2,-56.3C16.1,-57.4,32.2,-60.5,38.1,-53.9Z" transform="translate(100 55)" />
                                    <text x="100" y="60" font-family="Inter, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="#1e293b" data-translate="cycle_bp_label">High Blood Pressure</text>
                                </g>
                                <g id="kidney-group">
                                    <path fill="#e2e8f0" d="M40.1,-56.9C51.8,-49.9,61,-40.1,67.8,-28.3C74.6,-16.5,79,1.3,74.5,16.5C70,31.7,56.6,44.3,42.3,53.4C28,62.5,12.8,68.1,-2.5,69.5C-17.8,70.9,-35.7,68.1,-48.5,58.8C-61.4,49.5,-69.3,33.7,-72.5,17.1C-75.7,0.5,-74.2,-16.9,-65.7,-30.3C-57.2,-43.7,-41.7,-53.1,-27.1,-59.1C-12.5,-65.1,--2.8,-67.7,8.6,-66.1C20,-64.5,30.1,-63.9,40.1,-56.9Z" transform="translate(100 145)" />
                                    <text x="100" y="150" font-family="Inter, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#1e293b" data-translate="cycle_kidney_label">Kidney Damage</text>
                                </g>
                                <path d="M 100 85 V 115" stroke="#94a3b8" stroke-width="3" marker-end="url(#arrowhead)"/>
                                <path d="M 130 130 A 30 30 0 0 1 130 70" stroke="#94a3b8" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                                <defs><marker id="arrowhead" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#94a3b8" /></marker></defs>
                            </svg>
                        </div>
                        <!-- Explanations & Controls -->
                        <div class="text-center md:text-left">
                            <div id="cycle-explanation" class="min-h-[120px]">
                                <!-- JS will populate this -->
                            </div>
                            <div class="flex justify-center md:justify-start space-x-4 mt-4">
                                <button id="bp-to-kidney-btn" class="font-semibold py-2 px-4 bg-blue-100 text-blue-700 rounded-lg shadow-sm hover:bg-blue-200 transition" data-translate="cycle_btn1">How BP Hurts Kidneys</button>
                                <button id="kidney-to-bp-btn" class="font-semibold py-2 px-4 bg-blue-100 text-blue-700 rounded-lg shadow-sm hover:bg-blue-200 transition" data-translate="cycle_btn2">How Kidneys Raise BP</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Are Your Kidneys OK? -->
        <section id="testing" class="py-16 md:py-24 bg-sky-100">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-extrabold text-slate-800" data-translate="testing_h2">How Do You Know If Your Kidneys Are Healthy?</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-slate-600" data-translate="testing_p">Kidney disease, like high blood pressure, is often silent in its early stages. Simple tests ordered by your doctor can check your kidney health. Click below to learn about the two key tests.</p>
                </div>
                
                <div class="grid lg:grid-cols-2 gap-8 items-center">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <button class="test-btn bg-white p-6 rounded-xl shadow-lg text-center" data-test="acr">
                            <div class="text-5xl">üíß</div>
                            <h3 class="mt-2 text-xl font-bold text-slate-700" data-translate="testing_urine_title">Urine Test (ACR)</h3>
                            <p class="text-sm text-slate-500" data-translate="testing_urine_p">Checks for protein in your urine.</p>
                        </button>
                        <button class="test-btn bg-white p-6 rounded-xl shadow-lg text-center" data-test="gfr">
                            <div class="text-5xl">ü©∏</div>
                            <h3 class="mt-2 text-xl font-bold text-slate-700" data-translate="testing_blood_title">Blood Test (eGFR)</h3>
                            <p class="text-sm text-slate-500" data-translate="testing_blood_p">Measures how well your kidneys filter.</p>
                        </button>
                    </div>
                    <div id="test-display" class="bg-white p-8 rounded-2xl shadow-xl min-h-[200px] flex items-center justify-center">
                        <p class="text-slate-500 text-center" data-translate="testing_display_p">Click a test on the left to see details.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Protection Plan Section -->
        <section id="protection-plan" class="py-16 md:py-24 bg-slate-800 text-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-extrabold" data-translate="plan_h2">Your Kidney Protection Plan</h2>
                    <p class="mt-4 max-w-2xl mx-auto text-lg text-slate-300" data-translate="plan_p">The best way to protect your kidneys is to control your blood pressure. This is a team effort between you and your doctor, focusing on these key actions.</p>
                </div>
                <div class="grid lg:grid-cols-3 gap-8">
                    <div class="bg-slate-700 p-8 rounded-xl shadow-lg text-center">
                        <h3 class="font-bold text-2xl text-sky-400" data-translate="plan_col1_title">1. Control Your Blood Pressure</h3>
                        <p class="mt-2 text-slate-300" data-translate="plan_col1_p">Reaching your blood pressure goal is the most important step you can take.</p>
                        <ul class="mt-4 text-left space-y-2">
                            <li class="flex items-center"><span class="text-2xl mr-3">üéØ</span> <span data-translate="plan_col1_li1">Aim for your goal (often below 130/80 mmHg).</span></li>
                            <li class="flex items-center"><span class="text-2xl mr-3">üíä</span> <span data-translate="plan_col1_li2">Take medications as prescribed.</span></li>
                            <li class="flex items-center"><span class="text-2xl mr-3">üè†</span> <span data-translate="plan_col1_li3">Monitor your BP at home.</span></li>
                        </ul>
                    </div>
                    <div class="bg-slate-700 p-8 rounded-xl shadow-lg text-center">
                        <h3 class="font-bold text-2xl text-sky-400" data-translate="plan_col2_title">2. Choose Kidney-Friendly Medicines</h3>
                        <p class="mt-2 text-slate-300" data-translate="plan_col2_p">Certain blood pressure drugs offer extra protection for the kidneys.</p>
                        <ul class="mt-4 text-left space-y-2">
                             <li class="flex items-center"><span class="text-2xl mr-3">üåø</span> <span data-translate="plan_col2_li1">Ask about ACE inhibitors.</span></li>
                            <li class="flex items-center"><span class="text-2xl mr-3">üõ°Ô∏è</span> <span data-translate="plan_col2_li2">Ask about ARBs.</span></li>
                            <li class="flex items-center"><span class="text-2xl mr-3">‚ö†Ô∏è</span> <span data-translate="plan_col2_li3">Avoid NSAIDs like ibuprofen if you have kidney disease.</span></li>
                        </ul>
                    </div>
                    <div class="bg-slate-700 p-8 rounded-xl shadow-lg text-center">
                        <h3 class="font-bold text-2xl text-sky-400" data-translate="plan_col3_title">3. Embrace a Healthy Lifestyle</h3>
                        <p class="mt-2 text-slate-300" data-translate="plan_col3_p">Your daily habits support both your blood pressure and your kidney health.</p>
                        <ul class="mt-4 text-left space-y-2">
                            <li class="flex items-center"><span class="text-2xl mr-3">üßÇ</span> <span data-translate="plan_col3_li1">Reduce sodium intake.</span></li>
                            <li class="flex items-center"><span class="text-2xl mr-3">üèÉ‚Äç‚ôÄÔ∏è</span> <span data-translate="plan_col3_li2">Be physically active.</span></li>
                            <li class="flex items-center"><span class="text-2xl mr-3">üö≠</span> <span data-translate="plan_col3_li3">Quit smoking.</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-900 text-slate-400">
        <div class="container mx-auto py-8 px-4 sm:px-6 lg:px-8 text-center">
            <p data-translate="footer_p1">This guide provides a simplified overview. For complete information, please visit the National Institute of Diabetes and Digestive and Kidney Diseases (NIDDK).</p>
            <a href="https://www.niddk.nih.gov/health-information/kidney-disease/high-blood-pressure" target="_blank" rel="noopener noreferrer" class="mt-2 inline-block text-blue-500 hover:text-blue-400 font-semibold transition" data-translate="footer_link">
                Go to the Full NIDDK Guide ‚Üí
            </a>
            <p class="mt-4 text-xs" data-translate="footer_p2">This content is for informational purposes only and not a substitute for professional medical advice.<br>&copy; 2024 Patient Education Initiative. Information sourced from NIDDK.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
             const translations = {
                en: {
                    header_title: "Your Kidneys & Blood Pressure",
                    full_guide_link: "Full NIDDK Guide ‚Üí",
                    cycle_h2: "The Vicious Cycle of High Blood Pressure and Kidney Disease",
                    cycle_p: "Your kidneys and blood pressure have a close relationship. High blood pressure can damage your kidneys, and damaged kidneys can make your blood pressure worse. Click the buttons to see how this cycle works.",
                    cycle_bp_label: "High Blood Pressure",
                    cycle_kidney_label: "Kidney Damage",
                    cycle_btn1: "How BP Hurts Kidneys",
                    cycle_btn2: "How Kidneys Raise BP",
                    cycle_exp_default_title: "A Two-Way Street",
                    cycle_exp_default_desc: "Your kidneys help control blood pressure, but high blood pressure can also damage your kidneys.",
                    cycle_exp_bpToKidney_title: "High BP Damages Kidneys",
                    cycle_exp_bpToKidney_desc: "High pressure damages the small blood vessels in the kidneys, making it hard for them to filter waste and remove extra fluid from your body.",
                    cycle_exp_kidneyToBp_title: "Damaged Kidneys Raise BP",
                    cycle_exp_kidneyToBp_desc: "When kidneys can't remove enough fluid, the extra fluid in your blood vessels raises your blood pressure even more, creating a dangerous cycle.",
                    testing_h2: "How Do You Know If Your Kidneys Are Healthy?",
                    testing_p: "Kidney disease, like high blood pressure, is often silent in its early stages. Simple tests ordered by your doctor can check your kidney health. Click below to learn about the two key tests.",
                    testing_urine_title: "Urine Test (ACR)",
                    testing_urine_p: "Checks for protein in your urine.",
                    testing_blood_title: "Blood Test (eGFR)",
                    testing_blood_p: "Measures how well your kidneys filter.",
                    testing_display_p: "Click a test on the left to see details.",
                    testing_acr_title: "Urine Test (ACR)",
                    testing_acr_text: "The albumin-to-creatinine ratio (ACR) checks for albumin, a type of protein, in your urine. Healthy kidneys don't let albumin pass from the blood into the urine. A damaged kidney lets some albumin through. An ACR result above 30 mg/g may be a sign of kidney disease.",
                    testing_gfr_title: "Blood Test (eGFR)",
                    testing_gfr_text: "The estimated glomerular filtration rate (eGFR) measures how well your kidneys are filtering wastes from your blood. It's calculated from the level of creatinine, a waste product, in your blood. A normal eGFR is 60 or higher. An eGFR below 60 may mean you have kidney disease.",
                    plan_h2: "Your Kidney Protection Plan",
                    plan_p: "The best way to protect your kidneys is to control your blood pressure. This is a team effort between you and your doctor, focusing on these key actions.",
                    plan_col1_title: "1. Control Your Blood Pressure",
                    plan_col1_p: "Reaching your blood pressure goal is the most important step you can take.",
                    plan_col1_li1: "Aim for your goal (often below 130/80 mmHg).",
                    plan_col1_li2: "Take medications as prescribed.",
                    plan_col1_li3: "Monitor your BP at home.",
                    plan_col2_title: "2. Choose Kidney-Friendly Medicines",
                    plan_col2_p: "Certain blood pressure drugs offer extra protection for the kidneys.",
                    plan_col2_li1: "Ask about ACE inhibitors.",
                    plan_col2_li2: "Ask about ARBs.",
                    plan_col2_li3: "Avoid NSAIDs like ibuprofen if you have kidney disease.",
                    plan_col3_title: "3. Embrace a Healthy Lifestyle",
                    plan_col3_p: "Your daily habits support both your blood pressure and your kidney health.",
                    plan_col3_li1: "Reduce sodium intake.",
                    plan_col3_li2: "Be physically active.",
                    plan_col3_li3: "Quit smoking.",
                    footer_p1: "This guide provides a simplified overview. For complete information, please visit the National Institute of Diabetes and Digestive and Kidney Diseases (NIDDK).",
                    footer_link: "Go to the Full NIDDK Guide ‚Üí",
                    footer_p2: "This content is for informational purposes only and not a substitute for professional medical advice.<br>&copy; 2024 Patient Education Initiative. Information sourced from NIDDK."
                },
                es: {
                    header_title: "Sus Ri√±ones y la Presi√≥n Arterial",
                    full_guide_link: "Gu√≠a Completa del NIDDK ‚Üí",
                    cycle_h2: "El C√≠rculo Vicioso de la Presi√≥n Arterial Alta y la Enfermedad Renal",
                    cycle_p: "Sus ri√±ones y su presi√≥n arterial tienen una estrecha relaci√≥n. La presi√≥n arterial alta puede da√±ar sus ri√±ones, y los ri√±ones da√±ados pueden empeorar su presi√≥n arterial. Haga clic en los botones para ver c√≥mo funciona este ciclo.",
                    cycle_bp_label: "Presi√≥n Arterial Alta",
                    cycle_kidney_label: "Da√±o Renal",
                    cycle_btn1: "C√≥mo la PA Da√±a los Ri√±ones",
                    cycle_btn2: "C√≥mo los Ri√±ones Aumentan la PA",
                    cycle_exp_default_title: "Una Calle de Doble Sentido",
                    cycle_exp_default_desc: "Sus ri√±ones ayudan a controlar la presi√≥n arterial, pero la presi√≥n arterial alta tambi√©n puede da√±ar sus ri√±ones.",
                    cycle_exp_bpToKidney_title: "La PA Alta Da√±a los Ri√±ones",
                    cycle_exp_bpToKidney_desc: "La alta presi√≥n da√±a los peque√±os vasos sangu√≠neos de los ri√±ones, lo que les dificulta filtrar los desechos y eliminar el exceso de l√≠quido de su cuerpo.",
                    cycle_exp_kidneyToBp_title: "Los Ri√±ones Da√±ados Aumentan la PA",
                    cycle_exp_kidneyToBp_desc: "Cuando los ri√±ones no pueden eliminar suficiente l√≠quido, el exceso de l√≠quido en los vasos sangu√≠neos aumenta a√∫n m√°s la presi√≥n arterial, creando un ciclo peligroso.",
                    testing_h2: "¬øC√≥mo Sabe Si Sus Ri√±ones Est√°n Sanos?",
                    testing_p: "La enfermedad renal, al igual que la presi√≥n arterial alta, suele ser silenciosa en sus primeras etapas. Unos simples an√°lisis ordenados por su m√©dico pueden verificar la salud de sus ri√±ones. Haga clic a continuaci√≥n para conocer las dos pruebas clave.",
                    testing_urine_title: "An√°lisis de Orina (ACR)",
                    testing_urine_p: "Busca prote√≠nas en su orina.",
                    testing_blood_title: "An√°lisis de Sangre (eGFR)",
                    testing_blood_p: "Mide qu√© tan bien filtran sus ri√±ones.",
                    testing_display_p: "Haga clic en una prueba a la izquierda para ver los detalles.",
                    testing_acr_title: "An√°lisis de Orina (ACR)",
                    testing_acr_text: "El cociente alb√∫mina-creatinina (ACR) busca alb√∫mina, un tipo de prote√≠na, en su orina. Los ri√±ones sanos no dejan pasar la alb√∫mina de la sangre a la orina. Un ri√±√≥n da√±ado deja pasar algo de alb√∫mina. Un resultado de ACR superior a 30 mg/g puede ser un signo de enfermedad renal.",
                    testing_gfr_title: "An√°lisis de Sangre (eGFR)",
                    testing_gfr_text: "La tasa de filtraci√≥n glomerular estimada (eGFR) mide qu√© tan bien sus ri√±ones est√°n filtrando los desechos de su sangre. Se calcula a partir del nivel de creatinina, un producto de desecho, en su sangre. Un eGFR normal es de 60 o m√°s. Un eGFR por debajo de 60 puede significar que tiene una enfermedad renal.",
                    plan_h2: "Su Plan de Protecci√≥n Renal",
                    plan_p: "La mejor manera de proteger sus ri√±ones es controlar su presi√≥n arterial. Este es un esfuerzo de equipo entre usted y su m√©dico, centrado en estas acciones clave.",
                    plan_col1_title: "1. Controle su Presi√≥n Arterial",
                    plan_col1_p: "Alcanzar su objetivo de presi√≥n arterial es el paso m√°s importante que puede dar.",
                    plan_col1_li1: "Apunte a su objetivo (a menudo por debajo de 130/80 mmHg).",
                    plan_col1_li2: "Tome los medicamentos seg√∫n lo prescrito.",
                    plan_col1_li3: "Controle su PA en casa.",
                    plan_col2_title: "2. Elija Medicamentos Amigables con los Ri√±ones",
                    plan_col2_p: "Ciertos medicamentos para la presi√≥n arterial ofrecen protecci√≥n adicional para los ri√±ones.",
                    plan_col2_li1: "Pregunte sobre los inhibidores de la ECA.",
                    plan_col2_li2: "Pregunte sobre los BRA.",
                    plan_col2_li3: "Evite los AINE como el ibuprofeno si tiene enfermedad renal.",
                    plan_col3_title: "3. Adopte un Estilo de Vida Saludable",
                    plan_col3_p: "Sus h√°bitos diarios apoyan tanto su presi√≥n arterial como la salud de sus ri√±ones.",
                    plan_col3_li1: "Reduzca la ingesta de sodio.",
                    plan_col3_li2: "Sea f√≠sicamente activo.",
                    plan_col3_li3: "Deje de fumar.",
                    footer_p1: "Esta gu√≠a proporciona una descripci√≥n simplificada. Para obtener informaci√≥n completa, visite el Instituto Nacional de Diabetes y Enfermedades Digestivas y Renales (NIDDK).",
                    footer_link: "Ir a la Gu√≠a Completa del NIDDK ‚Üí",
                    footer_p2: "Este contenido es para fines informativos y no sustituye el consejo m√©dico profesional.<br>&copy; 2024 Iniciativa de Educaci√≥n para Pacientes. Informaci√≥n obtenida del NIDDK."
                }
            };

            const languageSelector = document.getElementById('language-selector');
            const translatableElements = document.querySelectorAll('[data-translate]');

            function translatePage(language) {
                translatableElements.forEach(el => {
                    const key = el.dataset.translate;
                    if (translations[language] && translations[language][key]) {
                        el.innerHTML = translations[language][key];
                    }
                });
                // Update interactive components
                const activeTestBtn = document.querySelector('.test-btn.active');
                if (activeTestBtn) {
                    updateTestDisplay(activeTestBtn.dataset.test, language);
                }
                 const activeCycleExp = document.querySelector('#cycle-explanation h3');
                 if(activeCycleExp) {
                     const currentTitle = activeCycleExp.innerHTML;
                     if(currentTitle === translations.en.cycle_exp_bpToKidney_title || currentTitle === translations.es.cycle_exp_bpToKidney_title) {
                         showCycleExplanation('bpToKidney', language);
                     } else if (currentTitle === translations.en.cycle_exp_kidneyToBp_title || currentTitle === translations.es.cycle_exp_kidneyToBp_title) {
                         showCycleExplanation('kidneyToBp', language);
                     } else {
                         showCycleExplanation('default', language);
                     }
                 } else {
                     showCycleExplanation('default', language);
                 }
            }

            languageSelector.addEventListener('change', (event) => {
                translatePage(event.target.value);
            });

            // Vicious Cycle Infographic
            const bpToKidneyBtn = document.getElementById('bp-to-kidney-btn');
            const kidneyToBpBtn = document.getElementById('kidney-to-bp-btn');
            const cycleExplanation = document.getElementById('cycle-explanation');
            const bpGroup = document.getElementById('bp-group');
            const kidneyGroup = document.getElementById('kidney-group');

            function showCycleExplanation(type, lang = 'en') {
                const data = {
                    title: translations[lang][`cycle_exp_${type}_title`],
                    description: translations[lang][`cycle_exp_${type}_desc`]
                };
                cycleExplanation.style.opacity = 0;
                setTimeout(() => {
                    cycleExplanation.innerHTML = `
                        <h3 class="text-xl font-bold text-slate-800">${data.title}</h3>
                        <p class="mt-2 text-slate-600">${data.description}</p>
                    `;
                    cycleExplanation.style.opacity = 1;
                }, 400);
            }

            bpToKidneyBtn.addEventListener('click', () => {
                const currentLang = languageSelector.value;
                showCycleExplanation('bpToKidney', currentLang);
                bpGroup.querySelector('path').style.fill = '#f87171'; // red-400
                kidneyGroup.querySelector('path').style.fill = '#e2e8f0'; // slate-200
            });

            kidneyToBpBtn.addEventListener('click', () => {
                const currentLang = languageSelector.value;
                showCycleExplanation('kidneyToBp', currentLang);
                kidneyGroup.querySelector('path').style.fill = '#f87171'; // red-400
                bpGroup.querySelector('path').style.fill = '#e2e8f0'; // slate-200
            });

            showCycleExplanation('default', 'en');

            // Testing Logic
            const testButtons = document.querySelectorAll('.test-btn');
            const testDisplay = document.getElementById('test-display');
            
            function updateTestDisplay(key, lang = 'en') {
                const data = {
                    title: translations[lang][`testing_${key}_title`],
                    text: translations[lang][`testing_${key}_text`]
                };
                testDisplay.innerHTML = `
                    <div class="text-left">
                        <h3 class="text-2xl font-bold text-slate-800">${data.title}</h3>
                        <p class="mt-2 text-slate-600 text-lg">${data.text}</p>
                    </div>
                `;
            }

            testButtons.forEach(button => {
                button.addEventListener('click', () => {
                    testButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    const key = button.dataset.test;
                    const currentLang = languageSelector.value;
                    updateTestDisplay(key, currentLang);
                });
            });
        });
    </script>
</body>
</html>
